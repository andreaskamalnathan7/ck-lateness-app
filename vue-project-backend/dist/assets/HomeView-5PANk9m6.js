const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/web-Cb15TyNQ.js","assets/index-r35W0lTO.js","assets/index-D8L4DZad.css","assets/BottomNav-BAYLEPWZ.js","assets/BottomNav-CcdC5ZCT.css","assets/SelectionModal-BfbL01Zn.js","assets/FaceScanner-CD5LhS-o.js"])))=>i.map(i=>d[i]);
import{j as I,_ as D,u as H,c as g,a as e,e as p,t as j,k as O,b as f,r as u,l as $,o as S,A as Q}from"./index-r35W0lTO.js";import{B as V}from"./BottomNav-BAYLEPWZ.js";import{_ as M}from"./SelectionModal-BfbL01Zn.js";var E;(function(s){s.Aztec="AZTEC",s.Codabar="CODABAR",s.Code39="CODE_39",s.Code93="CODE_93",s.Code128="CODE_128",s.DataMatrix="DATA_MATRIX",s.Ean8="EAN_8",s.Ean13="EAN_13",s.Itf="ITF",s.Pdf417="PDF_417",s.QrCode="QR_CODE",s.UpcA="UPC_A",s.UpcE="UPC_E"})(E||(E={}));var v;(function(s){s.CalendarEvent="CALENDAR_EVENT",s.ContactInfo="CONTACT_INFO",s.DriversLicense="DRIVERS_LICENSE",s.Email="EMAIL",s.Geo="GEO",s.Isbn="ISBN",s.Phone="PHONE",s.Product="PRODUCT",s.Sms="SMS",s.Text="TEXT",s.Url="URL",s.Wifi="WIFI",s.Unknown="UNKNOWN"})(v||(v={}));var C;(function(s){s[s["640x480"]=0]="640x480",s[s["1280x720"]=1]="1280x720",s[s["1920x1080"]=2]="1920x1080",s[s["3840x2160"]=3]="3840x2160"})(C||(C={}));var w;(function(s){s.Front="FRONT",s.Back="BACK"})(w||(w={}));var _;(function(s){s[s.UNKNOWN=0]="UNKNOWN",s[s.PENDING=1]="PENDING",s[s.DOWNLOADING=2]="DOWNLOADING",s[s.CANCELED=3]="CANCELED",s[s.COMPLETED=4]="COMPLETED",s[s.FAILED=5]="FAILED",s[s.INSTALLING=6]="INSTALLING",s[s.DOWNLOAD_PAUSED=7]="DOWNLOAD_PAUSED"})(_||(_={}));var d;(function(s){s[s.HOME=0]="HOME",s[s.UNKNOWN=1]="UNKNOWN",s[s.WORK=2]="WORK"})(d||(d={}));var x;(function(s){s[s.HOME=0]="HOME",s[s.UNKNOWN=1]="UNKNOWN",s[s.WORK=2]="WORK"})(x||(x={}));var b;(function(s){s[s.FAX=0]="FAX",s[s.HOME=1]="HOME",s[s.MOBILE=2]="MOBILE",s[s.UNKNOWN=3]="UNKNOWN",s[s.WORK=4]="WORK"})(b||(b={}));var A;(function(s){s[s.OPEN=1]="OPEN",s[s.WEP=2]="WEP",s[s.WPA=3]="WPA"})(A||(A={}));const X=I("BarcodeScanner",{web:()=>D(()=>import("./web-Cb15TyNQ.js"),__vite__mapDeps([0,1,2,3,4,5])).then(s=>new s.BarcodeScannerWeb)}),z={class:"min-h-screen bg-slate-50 pb-24 relative"},q={class:"bg-[#84a96b] h-40 p-6 rounded-b-[3rem] flex items-start shadow-md"},J={class:"px-6 -mt-16"},Y={class:"bg-white rounded-[2.5rem] shadow-xl shadow-slate-200 p-10 flex flex-col items-center border border-slate-50"},Z={class:"text-2xl font-bold text-slate-800 text-center leading-tight"},T={class:"text-[#84a96b]"},G={__name:"HomeView",setup(s){const m=`${Q}/api/scan`,o=H(),L=$(()=>D(()=>import("./FaceScanner-CD5LhS-o.js"),__vite__mapDeps([6,1,2]))),r=u(!1),l=u(!1),a=u(""),W=["Traffic / Macet","Vehicle Trouble","Overslept","Rain / Hujan","Other"],R=async()=>{if(a.value="",!window.Capacitor?.isNativePlatform()){console.warn("Running in Browser: Simulating QR Scan..."),confirm("Simulate Successful Scan of 'CK-ENTRANCE-01'?")&&(r.value=!0);return}try{const n=await X.scan();n?.barcodes?.length>0&&(n.barcodes[0].displayValue==="CK-ENTRANCE-01"?r.value=!0:alert("Unauthorized QR Code! Please scan the school entrance code."))}catch(n){console.error("Scan Error:",n),alert("Camera error. Please check permissions.")}},U=()=>{l.value=!1,r.value=!0},h=async()=>{const n=new Date,t=new Date;t.setHours(7,45,0);const i=n-t,c=i>0?Math.floor(i/6e4):0,P=n.toISOString().slice(0,19).replace("T"," "),K={student_id:o.user.student_id,reason:a.value,minutes_late:c,arrival_time:P};try{const N=await fetch(m,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(K)});if(N.ok)alert(`Recorded! You are ${c} mins late.`),await o.fetchHistory(),r.value=!1,a.value="";else{const k=await N.json();alert("Server Error: "+(k.error||"Failed to save record"))}}catch{alert("Network Error: Could not connect to the database server.")}};return(n,t)=>(S(),g("div",z,[e("div",q,[e("button",{onClick:t[0]||(t[0]=i=>n.$router.back()),class:"p-2 -ml-2"},[...t[5]||(t[5]=[e("i",{class:"fas fa-arrow-left text-white text-xl"},null,-1)])])]),e("div",J,[e("div",Y,[e("h2",Z,[t[6]||(t[6]=p(" Welcome,",-1)),t[7]||(t[7]=e("br",null,null,-1)),e("span",T,j(O(o).user.name||"Student"),1)]),e("button",{onClick:R,class:"mt-12 w-full max-w-55 bg-[#2d74da] text-white rounded-2xl py-5 flex items-center justify-center gap-4 shadow-lg shadow-blue-200 active:scale-95 transition-all"},[...t[8]||(t[8]=[e("i",{class:"fas fa-qrcode text-2xl"},null,-1),e("span",{class:"text-lg font-bold tracking-wide uppercase"},"Scan QR Code",-1)])]),e("button",{onClick:t[1]||(t[1]=i=>l.value=!0),class:"mt-12 w-full max-w-55 bg-[#2d74da] text-white rounded-2xl py-5 flex items-center justify-center gap-4 shadow-lg shadow-blue-200 active:scale-95 transition-all"},[...t[9]||(t[9]=[e("i",{class:"fas fa-user-check text-2xl"},null,-1),e("span",{class:"text-lg font-bold tracking-wide uppercase"},"Face Recognition",-1)])]),f(O(L),{show:l.value,onClose:t[2]||(t[2]=i=>l.value=!1),onVerified:U},null,8,["show"])])]),f(M,{title:"Why are you late?",show:r.value,options:W,modelValue:a.value,"onUpdate:modelValue":t[3]||(t[3]=i=>a.value=i),onClose:t[4]||(t[4]=i=>r.value=!1),onSubmit:h},null,8,["show","modelValue"]),f(V)]))}},ss=Object.freeze(Object.defineProperty({__proto__:null,default:G},Symbol.toStringTag,{value:"Module"}));export{v as B,ss as H,w as L};
