import{u as S,c as C,a as t,b as a,d as n,t as u,e as m,r as f,A as y,f as U,h as k,g as A,o as $}from"./index-r35W0lTO.js";import{_ as d}from"./BaseInput-CpPQ98TI.js";import{_ as i}from"./SelectionModal-BfbL01Zn.js";const D={class:"min-h-screen bg-slate-50 flex flex-col items-center p-6 pb-32"},P={class:"w-full max-w-md bg-white rounded-[2.5rem] shadow-2xl p-8 mt-4"},R={class:"space-y-6"},_={class:"space-y-2"},h={class:"flex flex-col items-start"},B={class:"text-xs text-slate-400"},M={class:"text-lg font-bold text-[#84a96b]"},N={class:"space-y-2"},j={class:"mt-8 pt-6 border-t border-slate-100 text-center"},G={class:"text-slate-500 text-sm"},T={__name:"RegisterView",setup(I){const x=S(),g=A(),o=f(null),b=`${y}/api/register`,l=f({email:"",password:"",name:"",student_id:"",level:"SD",grade:"1",class_group:"A",ship:"Clipper"}),v=k(()=>l.value.level==="SD"?["1","2","3","4","5","6"]:l.value.level==="SMP"?["7","8","9"]:l.value.level==="SMA"?["10","11","12"]:[]),w=()=>{l.value.grade=v.value[0],o.value="grade"},V=()=>{o.value="class_group"},c=async()=>{if(!l.value.password||l.value.password.length<6)return alert("Password must be at least 6 characters");try{const r=await fetch(b,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l.value)});if(r.ok){const{password:e,...p}=l.value;await x.saveUser(p),g.push("/home")}else{const e=await r.json();alert(e.error||"Registration failed.")}}catch{alert("Connection error! Is your server running?")}};return(r,e)=>{const p=U("router-link");return $(),C("div",D,[t("div",P,[e[22]||(e[22]=t("h1",{class:"text-3xl font-bold text-center text-slate-800 mb-2"},"Register",-1)),e[23]||(e[23]=t("p",{class:"text-slate-400 text-center mb-8"},"Complete your student profile",-1)),t("div",R,[a(d,{modelValue:l.value.email,"onUpdate:modelValue":e[0]||(e[0]=s=>l.value.email=s),placeholder:"Email Address",type:"email"},{icon:n(()=>[...e[12]||(e[12]=[t("i",{class:"fas fa-envelope text-[#84a96b]"},null,-1)])]),_:1},8,["modelValue"]),a(d,{modelValue:l.value.password,"onUpdate:modelValue":e[1]||(e[1]=s=>l.value.password=s),placeholder:"Create Password",type:"password"},{icon:n(()=>[...e[13]||(e[13]=[t("i",{class:"fas fa-lock text-[#84a96b]"},null,-1)])]),_:1},8,["modelValue"]),a(d,{modelValue:l.value.name,"onUpdate:modelValue":e[2]||(e[2]=s=>l.value.name=s),placeholder:"Full Name"},{icon:n(()=>[...e[14]||(e[14]=[t("i",{class:"fas fa-user text-[#84a96b]"},null,-1)])]),_:1},8,["modelValue"]),a(d,{modelValue:l.value.student_id,"onUpdate:modelValue":e[3]||(e[3]=s=>l.value.student_id=s),placeholder:"Student ID (e.g. S0441)"},{icon:n(()=>[...e[15]||(e[15]=[t("i",{class:"fas fa-id-card text-[#84a96b]"},null,-1)])]),_:1},8,["modelValue"]),t("div",_,[e[17]||(e[17]=t("label",{class:"text-sm font-bold text-slate-400 ml-2 uppercase tracking-wider"},"Class Information",-1)),t("button",{onClick:e[4]||(e[4]=s=>o.value="level"),class:"w-full p-4 rounded-2xl bg-slate-50 border-2 border-slate-50 flex justify-between items-center text-slate-700 font-medium"},[t("div",h,[t("span",B,u(l.value.level),1),t("span",M,u(l.value.grade)+u(l.value.class_group),1)]),e[16]||(e[16]=t("i",{class:"fas fa-edit text-slate-300"},null,-1))])]),t("div",N,[e[19]||(e[19]=t("label",{class:"text-sm font-bold text-slate-400 ml-2 uppercase tracking-wider"},"Ship",-1)),t("button",{onClick:e[5]||(e[5]=s=>o.value="ship"),class:"w-full p-4 rounded-2xl bg-slate-50 border-2 border-slate-50 flex justify-between items-center text-slate-700 font-medium"},[m(u(l.value.ship)+" ",1),e[18]||(e[18]=t("i",{class:"fas fa-chevron-down text-slate-300"},null,-1))])]),t("button",{onClick:c,class:"w-full bg-[#84a96b] text-white font-bold py-5 rounded-3xl shadow-lg shadow-green-100 mt-4 active:scale-95 transition-all text-lg"}," Register Account "),t("div",j,[t("p",G,[e[21]||(e[21]=m(" Already have an account? ",-1)),a(p,{to:"/",class:"text-[#84a96b] font-bold hover:underline ml-1"},{default:n(()=>[...e[20]||(e[20]=[m("Login Here",-1)])]),_:1})])])])]),a(i,{title:"Select Level",show:o.value==="level",options:["SD","SMP","SMA"],modelValue:l.value.level,"onUpdate:modelValue":e[6]||(e[6]=s=>l.value.level=s),onClose:w},null,8,["show","modelValue"]),a(i,{title:`Select Grade (${l.value.level})`,show:o.value==="grade",options:v.value,modelValue:l.value.grade,"onUpdate:modelValue":e[7]||(e[7]=s=>l.value.grade=s),onClose:V},null,8,["title","show","options","modelValue"]),a(i,{title:"Select Class Group",show:o.value==="class_group",options:["A","B","C"],modelValue:l.value.class_group,"onUpdate:modelValue":e[8]||(e[8]=s=>l.value.class_group=s),onClose:e[9]||(e[9]=s=>o.value=null)},null,8,["show","modelValue"]),a(i,{title:"Select Your Ship",show:o.value==="ship",options:["Clipper","Galleon","Frigate","Schooner"],modelValue:l.value.ship,"onUpdate:modelValue":e[10]||(e[10]=s=>l.value.ship=s),onClose:e[11]||(e[11]=s=>o.value=null)},null,8,["show","modelValue"])])}}};export{T as default};
