import{u as h,c as x,a as t,w,b as n,d as i,t as y,e as c,r as d,f as _,g as k,o as V,A as P}from"./index-r35W0lTO.js";import{_ as m}from"./BaseInput-CpPQ98TI.js";const S={class:"min-h-screen bg-slate-50 flex flex-col items-center justify-center p-6"},L={class:"w-full max-w-md bg-white rounded-[2.5rem] shadow-2xl p-10"},C={class:"relative"},U=["disabled"],A={class:"mt-8 pt-8 border-t border-slate-100 text-center"},B={class:"text-slate-500"},j={__name:"LoginView",setup(E){const u=h(),p=k(),f=`${P}/api/login`,s=d(""),o=d(""),a=d(!1),b=async()=>{if(!s.value||!o.value)return alert("Please enter both email and password.");a.value=!0;try{const l=await fetch(f,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:s.value,password:o.value})}),e=await l.json();l.ok?(await u.saveUser(e.user),await u.fetchHistory(),p.push("/home")):alert(e.error||"Login failed. Please check your credentials.")}catch{alert("Connection Error. Is the server running at the correct ip?")}finally{a.value=!1}},v=()=>{alert("For security, please contact the School Office or your Teacher to reset your password manually in the database.")};return(l,e)=>{const g=_("router-link");return V(),x("div",S,[t("div",L,[e[6]||(e[6]=t("div",{class:"text-center mb-10"},[t("h1",{class:"text-4xl font-extrabold text-slate-800 tracking-tight"},"Login"),t("p",{class:"text-slate-400 mt-2 font-medium"},"Welcome back!")],-1)),t("form",{onSubmit:w(b,["prevent"]),class:"space-y-5"},[n(m,{modelValue:s.value,"onUpdate:modelValue":e[0]||(e[0]=r=>s.value=r),placeholder:"Email",type:"email"},{icon:i(()=>[...e[2]||(e[2]=[t("i",{class:"fas fa-envelope text-slate-400"},null,-1)])]),_:1},8,["modelValue"]),t("div",C,[n(m,{modelValue:o.value,"onUpdate:modelValue":e[1]||(e[1]=r=>o.value=r),placeholder:"Password",type:"password"},{icon:i(()=>[...e[3]||(e[3]=[t("i",{class:"fas fa-lock text-slate-400"},null,-1)])]),_:1},8,["modelValue"]),t("button",{type:"button",onClick:v,class:"absolute right-2 -bottom-6 text-xs text-[#84a96b] font-bold"}," Forgot Password? ")]),t("button",{type:"submit",disabled:a.value,class:"w-full bg-[#84a96b] hover:bg-green-600 text-white font-bold py-4 rounded-2xl shadow-lg mt-8 text-lg active:scale-95 transition-all disabled:opacity-50"},y(a.value?"Authenticating...":"Login"),9,U)],32),t("div",A,[t("p",B,[e[5]||(e[5]=c(" Don't have an account? ",-1)),n(g,{to:"/register",class:"text-[#84a96b] font-bold hover:underline ml-1"},{default:i(()=>[...e[4]||(e[4]=[c(" Register Here ",-1)])]),_:1})])])])])}}};export{j as default};
